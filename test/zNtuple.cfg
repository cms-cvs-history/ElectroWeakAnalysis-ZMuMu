process ZMuMuSelection = {

  include "FWCore/MessageLogger/data/MessageLogger.cfi"

  service = TFileService {
    string fileName = "histo.root"
  }

  untracked PSet options = {
    untracked bool wantSummary = true  # default is false
  }

  source = PoolSource {
    untracked vstring fileNames = {
      "file:zToMuMu.root"
    }
  }

replace PoolSource.fileNames = {
'/store/CSA07/mc/2007/10/6/CSA07-CSA07Muon-Tier0-Express00-A01/0001/020F0DC1-6474-DC11-BE82-000423D99E46.root',
'/store/CSA07/mc/2007/10/6/CSA07-CSA07Muon-Tier0-Express00-A01/0001/0E7A1E1E-6174-DC11-AD9F-001617DBD282.root',
'/store/CSA07/mc/2007/10/6/CSA07-CSA07Muon-Tier0-Express00-A01/0001/1CA9B996-6074-DC11-A246-000E0C3F081B.root',
'/store/CSA07/mc/2007/10/6/CSA07-CSA07Muon-Tier0-Express00-A01/0001/2417B623-6174-DC11-B782-00304885B25E.root',
'/store/CSA07/mc/2007/10/6/CSA07-CSA07Muon-Tier0-Express00-A01/0001/2E1FA9B0-6074-DC11-B01E-000423D33970.root',
'/store/CSA07/mc/2007/10/6/CSA07-CSA07Muon-Tier0-Express00-A01/0001/40971402-6074-DC11-B41E-000423D952C0.root',
'/store/CSA07/mc/2007/10/6/CSA07-CSA07Muon-Tier0-Express00-A01/0001/46620A43-6274-DC11-A632-001617DBD59C.root',
'/store/CSA07/mc/2007/10/6/CSA07-CSA07Muon-Tier0-Express00-A01/0001/5A27471A-6174-DC11-BCAF-001617E30CC8.root',
'/store/CSA07/mc/2007/10/6/CSA07-CSA07Muon-Tier0-Express00-A01/0001/5C789422-6374-DC11-B500-001617E30CE8.root',
'/store/CSA07/mc/2007/10/6/CSA07-CSA07Muon-Tier0-Express00-A01/0001/60B7E2CC-6374-DC11-B862-000423D952C0.root',
'/store/CSA07/mc/2007/10/6/CSA07-CSA07Muon-Tier0-Express00-A01/0001/6ACD8457-6274-DC11-BBED-001617DBD3CA.root',
'/store/CSA07/mc/2007/10/6/CSA07-CSA07Muon-Tier0-Express00-A01/0001/7444BACC-6374-DC11-BE28-000423D944F8.root',
'/store/CSA07/mc/2007/10/6/CSA07-CSA07Muon-Tier0-Express00-A01/0001/8CEDC3CA-6374-DC11-B598-001617C3B78C.root',
'/store/CSA07/mc/2007/10/6/CSA07-CSA07Muon-Tier0-Express00-A01/0001/AAB131D0-6374-DC11-84CB-000423D996B4.root',
'/store/CSA07/mc/2007/10/6/CSA07-CSA07Muon-Tier0-Express00-A01/0001/B23CF4BF-6474-DC11-9D9C-000423D9899C.root',
'/store/CSA07/mc/2007/10/6/CSA07-CSA07Muon-Tier0-Express00-A01/0001/B876EC43-6274-DC11-98F2-000423D987FC.root',
'/store/CSA07/mc/2007/10/6/CSA07-CSA07Muon-Tier0-Express00-A01/0001/DEECCBBA-6074-DC11-93CE-000E0C3F0829.root',
'/store/CSA07/mc/2007/10/6/CSA07-CSA07Muon-Tier0-Express00-A01/0001/E89C7E51-6274-DC11-AA7C-001617DBCF62.root',
'/store/CSA07/mc/2007/10/6/CSA07-CSA07Muon-Tier0-Express00-A01/0002/06158642-1475-DC11-B810-000423D989F0.root',
'/store/CSA07/mc/2007/10/6/CSA07-CSA07Muon-Tier0-Express00-A01/0002/0A5154BE-1675-DC11-A037-001617C3B6F0.root',
'/store/CSA07/mc/2007/10/6/CSA07-CSA07Muon-Tier0-Express00-A01/0002/0C7B13C7-0475-DC11-9197-000423D98520.root',
'/store/CSA07/mc/2007/10/6/CSA07-CSA07Muon-Tier0-Express00-A01/0002/3C7E457F-CE74-DC11-A9AA-000423D98A20.root',
'/store/CSA07/mc/2007/10/6/CSA07-CSA07Muon-Tier0-Express00-A01/0002/42D45D9B-CF74-DC11-BFD7-001617C3B6FE.root',
'/store/CSA07/mc/2007/10/6/CSA07-CSA07Muon-Tier0-Express00-A01/0002/92AADB75-CE74-DC11-B7EE-000423D99E46.root',
'/store/CSA07/mc/2007/10/6/CSA07-CSA07Muon-Tier0-Express00-A01/0002/AA162C6B-CD74-DC11-B3F0-000423D98DD4.root',
'/store/CSA07/mc/2007/10/6/CSA07-CSA07Muon-Tier0-Express00-A01/0002/E60B71BF-1675-DC11-B466-000423D94F48.root',
'/store/CSA07/mc/2007/10/6/CSA07-CSA07Muon-Tier0-Express00-A01/0002/EE7C1F95-7875-DC11-AE82-003048562956.root',
'/store/CSA07/mc/2007/10/6/CSA07-CSA07Muon-Tier0-Express00-A01/0002/F6C2A1BD-1675-DC11-872F-001617C3B6A8.root'
}

  untracked PSet maxEvents = {
    untracked int32 input = 100
  }

  module zMuMuHisto = ZToMuMuHistogrammer  {
    InputTag src = zToMuMuGolden
    InputTag muonIsolations1 = allMuonIsolations
    InputTag muonIsolations2 = allMuonIsolations
    VPSet histograms = {
      {
        untracked double min          =    0.0
        untracked double max          = 1000.0 
        untracked int32 nbins         =   1000
        untracked string name         = "zMass"
        untracked string description  = "Z mass (GeV)"
        untracked string plotquantity = "mass"
      },
      {
        untracked double min          =    0.0
        untracked double max          = 1000.0 
        untracked int32 nbins         =   1000
        untracked string name         = "zPt"
        untracked string description  = "Z p_{t} (GeV/c)"
        untracked string plotquantity = "pt"
      },
      {
        untracked double min          =   -8.0
        untracked double max          =   +8.0 
        untracked int32 nbins         =    160
        untracked string name         = "zEta"
        untracked string description  = "Z pseudorapidity (#eta)"
        untracked string plotquantity = "eta"
      },   
      {
        untracked double min          =   -4.0
        untracked double max          =   +4.0
        untracked int32 nbins         =    160
        untracked string name         = "zY"
        untracked string description  = "Z rapidity (y)"
        untracked string plotquantity = "rapidity"
      }
    }    
  }

  module zNtuple = ZToLLEdmNtupleDumper {
    VPSet zBlocks = {
      {
        string zName = "z"
        InputTag z = zToMuMuGolden
        InputTag zGenParticlesMatch = zToMuMuGoldenGenParticlesMatch
        InputTag isolations1 = allMuonIsolations
        InputTag isolations2 = allMuonIsolations
      }
   }
  }

  module eventInfo = AsciiOutputModule { 
  }

  module ntuple = PoolOutputModule {
    untracked string fileName = "zToMuMuNtuple.root"
    untracked vstring outputCommands = {
      "drop *",
      "keep *_zNtuple_*_*"
    }
  }

  path p = {  
    zMuMuHisto, zNtuple
  }	

  endpath e = { 
    eventInfo, ntuple
  }
}
